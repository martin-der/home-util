group 'net.tetrakoopa'
version '1.0-SNAPSHOT'


task runTests(type:Exec) {
	workingDir '../'
	commandLine './test/runall.sh'

	//store the output instead of printing to the console:
	//standardOutput = new ByteArrayOutputStream()

	//extension method stopTomcat.output() can be used to obtain the output:
	/*ext.output = {
		return standardOutput.toString()
	}*/
}

def homeutilProjectDir = "${project.projectDir}/.."

task runTestsForXXX() {

	def sourceDir = 'script'
	file("$sourceDir").eachFile { testDir ->
		testDir.eachFile { file ->
			exec {
				workingDir homeutilProjectDir
				commandLine 'bash', "$file"
			}
		}
	}
}

tasks.withType(Test) {
	runtests
}


